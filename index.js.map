{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport { renderGallery, loader, iziToast, SimpleLightbox };\n\nfunction renderGallery(images, append = false) {\n  const markup = images\n    .map(\n      img => `\n        <li class=\"gallery-item\">  <div class=\"image-card\">  <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n              <img class=\"gallery-image\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n            </a>\n            <div class=\"gallery-meta\">\n              <ul class=\"gallery-stats\">\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Likes</span>\n                  <span class=\"stats-value\">${img.likes}</span>\n                </li>\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Views</span>\n                  <span class=\"stats-value\">${img.views}</span>\n                </li>\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Comments</span>\n                  <span class=\"stats-value\">${img.comments}</span>\n                </li>\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Downloads</span>\n                  <span class=\"stats-value\">${img.downloads}</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      `\n    )\n    .join('');\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n}\n","import axios from 'axios';\n\nconst API_KEY = '48704705-de0108bea4c192368cade13d3';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst axiosInstance = axios.create({\n  baseURL: BASE_URL,\n  params: {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nlet currentPage = 1;\n\nexport async function fetchImages(query, page = currentPage, perPage = 40) {\n  try {\n    const res = await axiosInstance.get('/', {\n      params: {\n        q: query,\n        page,\n        per_page: perPage,\n      },\n    });\n      if (res.data.hits.length > 0) { \n        currentPage++;\n      }\n    return res.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderGallery } from './js/render-functions.js';\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  currentPage = 1;\n  currentQuery = form.elements['search-query'].value.trim();\n\n  if (!currentQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  loader.classList.remove('hidden');\n  loadMoreButton.classList.add('hidden');\n\n  try {\n    const images = await fetchImages(currentQuery, currentPage);\n\n    if (images.length === 0) {\n      loader.classList.add('hidden');\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    renderGallery(images);\n    lightbox.refresh();\n\n    loadMoreButton.classList.remove('hidden');\n\n    setTimeout(() => {\n      loader.classList.add('hidden');\n    }, 200);\n  } catch (error) {\n    setTimeout(() => {\n      loader.classList.add('hidden');\n    }, 200);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching images',\n      position: 'topRight',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  loader.classList.remove('hidden');\n  currentPage++;\n  try {\n    const images = await fetchImages(currentQuery, currentPage);\n\n    if (images.length === 0) {\n      loader.classList.add('hidden');\n      loadMoreButton.classList.add('hidden');\n      iziToast.info({\n        title: 'Message',\n        message: \"We are sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n\n    renderGallery(images, true);\n    lightbox.refresh();\n\n    const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight,\n      behavior: 'smooth',\n    });\n\n    setTimeout(() => {\n      loader.classList.add('hidden');\n    }, 200);\n  } catch (error) {\n    setTimeout(() => {\n      loader.classList.add('hidden');\n    }, 200);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching images',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["gallery","renderGallery","images","append","markup","img","API_KEY","BASE_URL","axiosInstance","axios","currentPage","fetchImages","query","page","perPage","res","error","form","loader","loadMoreButton","lightbox","SimpleLightbox","currentQuery","e","iziToast","cardHeight"],"mappings":"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"}