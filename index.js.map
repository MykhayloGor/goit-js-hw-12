{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport { imagesTemplate, loader, iziToast, SimpleLightbox };\n\nfunction imageTemplate(image) {\n  let { webformatURL, largeImageURL, tags, likes, views, comments, downloads } =\n    image;\n\n  return `\n        <li class=\"gallery-item\">  <div class=\"image-card\">  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n              <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"gallery-meta\">\n              <ul class=\"gallery-stats\">\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Likes</span>\n                  <span class=\"stats-value\">${image.likes}</span>\n                </li>\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Views</span>\n                  <span class=\"stats-value\">${image.views}</span>\n                </li>\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Comments</span>\n                  <span class=\"stats-value\">${image.comments}</span>\n                </li>\n                <li class=\"stats-item\">\n                  <span class=\"stats-label\">Downloads</span>\n                  <span class=\"stats-value\">${image.downloads}</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>\n      `;\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n","import axios from 'axios';\n\nconst API_KEY = '48704705-de0108bea4c192368cade13d3';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst axiosInstance = axios.create({\n  baseURL: BASE_URL,\n  params: {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n  try {\n    const response = await axiosInstance.get('/', {\n      params: { q: query, page, per_page: perPage },\n    });\n    if (response.status !== 200) {\n      throw new Error(`API Error: ${response.status}`);\n    }\n    return response.data.hits;\n  } catch (error) {\n    return [];\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { imagesTemplate } from './js/render-functions.js';\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst params = {\n  query: null,\n  page: 1,\n  perPage: 40,\n};\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  params.query = e.target.elements['search-query'].value.trim();\n  params.page = 1;\n  if (!params.query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  hideLoadMoreBtn();\n  refs.gallery.innerHTML = '';\n\n  try {\n    const images = await fetchImages(params.query, params.page, params.perPage);\n    params.total = images.totalHits;\n    if (!images || images.length === 0) {\n      showError('Sorry, no images found. Try again!');\n      return;\n    }\n\n    refs.gallery.innerHTML = imagesTemplate(images);\n    lightbox.refresh();\n    showLoadMoreBtn();\n  } catch (error) {\n    showError('An error occurred while fetching images. Check console.');\n  } finally {\n    hideLoader();\n  }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n  params.page += 1;\n\n  try {\n    const images = await fetchImages(params.query, params.page, params.perPage);\n\n    if (!images || images.length === 0) {\n      hideLoadMoreBtn();\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n      return;\n    }\n\n    refs.gallery.insertAdjacentHTML('beforeend', imagesTemplate(images));\n    lightbox.refresh();\n    scrollPage();\n    const totalPages = Math.ceil(params.total / params.perPage);\n    if (params.page >= totalPages) {\n      hideLoadMoreBtn();\n      showInfo(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    showError('An error occurred while fetching images.');\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  setTimeout(() => {\n    refs.loader.classList.add('hidden');\n  }, 200);\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'topRight',\n  });\n}\n\nfunction showInfo(message) {\n  iziToast.info({\n    title: 'Message',\n    message,\n    position: 'topRight',\n  });\n}\n\nfunction scrollPage() {\n  const cardHeight =\n    refs.gallery.firstElementChild?.getBoundingClientRect().height || 0;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","API_KEY","BASE_URL","axiosInstance","axios","fetchImages","query","page","perPage","response","refs","params","lightbox","SimpleLightbox","iziToast","showLoader","hideLoadMoreBtn","showError","showLoadMoreBtn","hideLoader","showInfo","scrollPage","totalPages","message","cardHeight","_a"],"mappings":"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"}